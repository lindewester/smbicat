\section{An example}\label{sec:Alg} 

\subsection*{Monoids and bimodules in double categories}
\label{sec:mod}

As a demonstration of our method, we apply Theorem~\ref{thm:H} to prove that the family of bicategories $\mathcal{A}lg[{\mathbb{D}}]$ of monoids, bimodules and bimodule homomorphisms in a monoidal double category $\mathbb{D}$ is monoidal. The result of this section builds on work of the first author in~\cite[Theorem 11.5]{shulman:frbi} and some extentions of this theorem in the second author's PhD thesis~\cite[Chapter 5]{westerPhDthesis}.

The family $\mathcal{A}lg[{\mathbb{D}}]$ contains the well-known bicategories $\cat{2Vect}$, $\cat{2Hilb}$  introduced in~\cite{kapranov562},~\cite{baez2004higher}, the bicategory \cat{Prof}~\cite{benabou}. Additionally, it contains various subcategories that are relevant in the field of categorical quantum mechanics, such as the equivariant completion of a braided monoidal bicategory~\cite{carquevillerunkel}, which is a tool for finding topological quantum field theories, as well as the bicategory $2[CP^*[{\bf C}]]$ defined in~\cite{heunenvicarywester} as the mathematical foundation of a diagrammatic language for quantum protocols. %For full generality, we formulate the result for the categories of special, dagger, Frobenius, commutative, and symmetric monoids, as well as dagger bimodules.

A {\bf monoid} $(a, A, \mult, \unit)$ in a monoidal double category $\mathbb{D}$ consists of an object $a$, a loose 1-cell $A: a \mapsto a$ and globular 2-cells $\mult: A \odot A \rightarrow A$, $\unit: I_a \rightarrow A$, such that $\mult \circ (\mult \odot \id) = \mult \circ (\id \odot \mult)$ and $\mult \circ (\unit \odot \id) = \id = \mult \circ (\id \odot \mult)$.
In other words, it is a monoid in the usual sense in the monoidal category $\mathbb{D}(a,a)$. A {\bf monoid homomorphism} $(A,\tinymult[gray dot], \tinyunit[gray dot]) \mapsto (B,\tinymult[black dot], \tinyunit[black dot])$ is a pair $(f, {\bf f})$ of a 1-morphism $f:a\rightarrow b$ in $\mathbb{D}$ and a 2-cell ${\bf f}:A \rightarrow B$ in $\mathbb{D}$ that respects the multiplication, $f \circ \tinymult[gray dot] = \tinymult[black dot] \circ (f \odot f)$, as well as the unit, $\tinyunit[black dot] = f \circ \tinyunit[gray dot]$. $f: A \rightarrow B$. A {\bf bimodule} $(a,A,\tinymult[gray dot], \tinyunit[gray dot]) \mapsto (b, B,\tinymult[black dot], \tinyunit[black dot])$ is a pair (${\bf M}, M)$ of a $1-cell$ $M$ in $\doub{D}$ and a globular 2-cell ${\bf M}:A \times M \times B \rightarrow M$ in $\doub{D}$, with the structure of an $A$-$B$- bimodule. We will simply write $M$ for the bimodule $({\bf M}, m)$. This is also called an {\bf A-B-bimodule}. Note that $S(M) = T(A)$ and $T(M) = S(B)$. Let $\phi: (a,A,\tinymult[gray dot], \tinyunit[gray dot]) \rightarrow (c,C,\tinymult[black dot], \tinyunit[black dot])$ and $\psi: (b,B,\tinymult[gray dot], \tinyunit[gray dot]) \rightarrow (d,D,\tinymult[black dot], \tinyunit[black dot])$ be monoid homomorphisms and let $M$ and $N$ be an $A$-$B$-bimodule and a $C$-$D$-bimodule, respectively. A {\bf $(\phi, \psi)$-equivariant map} is a 2-morphism $f:M \rightarrow N$ in ${\doub{D}}$ such that ${\bf M} \circ (\phi \tens f \tens \psi) = f \circ {\bf N}$.

In other sources~\cite{westerthesis}~\cite{jamiesbook}~\cite{heunenvicarywester},~\cite{carquevillerunkel},  monoids are called algebras and equivariant maps correspond to extended bimodule homomorphisms. 


%We apply Theorem~\ref{thm:lcbcfunctor} to the double category below.

\begin{defn}
Let ${\mathbb{D}}$ be a double category. We can define a new double category $\mathbb{A}lg[{\mathbb{D}}]$ consisting of the elements listed below.

\begin{itemize}
\item 0-cells are {\bf monoids} $(a, A,\tinymult[gray dot], \tinyunit[gray dot])$, in the monoidal category ${\mathbb{D}_1}$. 
\item 1-morphisms $(A,\tinymult[gray dot], \tinyunit[gray dot]) \mapsto (B,\tinymult[black dot], \tinyunit[black dot])$ are {\bf monoid homomorphism}
\item horizontal 1-cells $(A,\tinymult[gray dot], \tinyunit[gray dot]) \mapsto (B,\tinymult[black dot], \tinyunit[black dot])$ are {\bf bimodules}
\item 2-cells $({\bf M},M) \rightarrow ({\bf N},N)$ from a $A$-$B$-bimodule to a $C$-$D$-bimodule are $(\phi, \psi)$-equivariant maps, where $\phi:  A\rightarrow C$, $\psi: B \rightarrow D$ are monoid homomorphisms.  
\end{itemize}
%\begin{itemize}
%\item 0-cells are {\bf monoids} $(A,\tinymult[gray dot], \tinyunit[gray dot])$, in the monoidal category ${\mathbb{D}_1}$. Note that this requires that $S(A)=T(A)$.
%\item 1-cells $(A,\tinymult[gray dot], \tinyunit[gray dot]) \mapsto (B,\tinymult[black dot], \tinyunit[black dot])$ are 1-cells ${\bf M}:A \rightarrow B$ with the structure of an $A-B-$bimodule.
%\item 2-cells are 2-morphisms in ${\cat B}$ that are bimodule homomorphisms.
%\end{itemize}
Structural data regarding this construction, such as horizontal composition, is described in~\cite{shulman:frbi}, where the double category is called $\mathbb{M}od(\mathbb{D})$. A more detailed description in the case that $\mathbb{D}$ is a monoidal category is given in~\cite{westerPhDthesis}.
\end{defn}

For the double category to be well-defined, we need certain coequalizers in $\mathbb{D}$ to exist. To this end we introduce the definition below, which is derived from~\cite[Definition 11.4]{shulman:frbi}.

\begin{defn}
We say that a monoidal double category $\mathbb{D}$ has {\bf local coequalizers} if for each object $a$, the hom-category $\mathbb{D}(a,a)$ has all coequalizers and the coequalizers are preserved by $\odot$. We write $\mathcal{D}bl^l$ for the 2-category of double categories with local coequalizers and $\cDblf^l$ for the 2-category of double categories with local coequalizers and loosely strong companions.
\end{defn}

\begin{prop}\label{thm:eqcomp}
Let $\mathbb{D}$ be a monoidal double category with local coequalizers and companions and conjoints, and such that the tensor product $\tens$ preserves the local coequalizers. The loose bicategory $\mathcal{A}lg[\mathbb{D}]$ of $\mathbb{A}lg[\mathbb{D}]$ is monoidal; it is braided or symmetric whenever $\mathbb{D}$ is braided or symmetric.
\end{prop}

\begin{proof}
It was shown in~\cite[Examples 9.2]{shulman:frbi} that the doube category above is symmetric monoidal and has loosely strong companions and conjoints. Therefore, we may apply Theorem~\ref{thm:lcbcfunctor}, which states that the horizontal bicategory $\mathcal{A}lg[\mathbb{D}]$ is symmetric monoidal.
\end{proof}


An explicit description of the monoidal structure for the special case when ${\mathbb{D}}$ is a monoidal category was given in~\cite{westerPhDthesis}. 

Similarly, monoidal functors $F,G:\mathbb{D} \rightarrow \mathbb{E}$ between double categories lift to monoidal functors of the form $\mathbb{A}lgF,\mathbb{A}lgG: \mathcal{A}lg[\mathbb{D}] \rightarrow \mathcal{A}lg[\mathbb{E}]$ and monoidal transformations $\alpha: F \Rightarrow G$ lift to monoidal transformations of the form $\mathbb{A}lg\alpha: \mathbb{A}lgF \Rightarrow \mathbb{A}lgG$. In fact, the $\mathbb{A}lg$ construction gives rise to a functor, as shown below. 

\begin{prop}\label{prop:funcAlg}
The $\bAlg$ construction gives rise to the following pseudo functors
\begin{align*}
\mathcal{M}on_s\mathcal{D}bl^l _f\rightarrow \mathcal{M}on\mathcal{B}icat\\
\mathcal{B}r\mathcal{M}on_s\mathcal{D}bl^l_f \rightarrow \mathcal{B}r\mathcal{M}on\mathcal{B}icat\\
\mathcal{S}ym\mathcal{M}on_s\mathcal{D}bl^l_f \rightarrow \mathcal{S}ym\mathcal{M}on\mathcal{B}icat\\
\end{align*}
\end{prop}

\begin{proof}
By~\cite[Proposition11.22]{shulman:frbi}, $\mathbb{A}lg$ gives rise to a functor $\mathcal{M}on_s\mathcal{D}bl_f^l \rightarrow \mathcal{M}on_s \mathcal{D}bl_f^l$, as well as the braided and symmetric versions. We compose this with the functor from Theorem~\ref{thm:H} to obtain the result
\end{proof}

\begin{cor}
The bicategory $\cat{2Vect}$ is symmetric monoidal.
\end{cor}

\begin{proof}
We obtain $\cat{2Vect}$ as $\cAlg[\cat{FVect}]$ from the braided monoidal category $\cat{FVect}$ of finite dimensional vector spaces and linear maps. The category $\cat{FVect}$ is symmetric monoidal, contains local coequalisers and has a tensor product that preserves coequalisers. The result followis from Proposition~\ref{prop:funcAlg}.
\end{proof}

\begin{cor}
The bicategory $\cat{Prof}$ is symmetric monoidal.
\end{cor}

\begin{proof}
The bicategory $\cat{Prof}$ can be constructed as the category $\cAlg[Span[\cat{C}]]$ from the monoidal double category of spans~\cite[Examples 4.2]{shulman:frbi}.
This category has local coequalisers and loosely strong companions, and if \cat{C} has limits, it is monoidal~\cite[Examples 4.15, 9.2]{shulman:frbi}. The result followis from Proposition~\ref{prop:funcAlg}.
\end{proof}

\subsection*{Applications in Quantum Theory}
Frobenius algebras and modules play an important role in quantum theory. 

\begin{defn}
A {\bf Frobenius algebra} in a monoidal double category ${\cat{C}}$ is a monoid $(A, \tinymult, \tinyunit)$ together with a comonoid 
$(a, A, \tinycomult, \tinycounit)$ that satisfies the equation $
(\id \tens \tinymult[gray dot]) \circ \alpha \circ (\tinycomult[gray dot] \tens \id) = (\tinymult[gray dot] \tens \id) \circ \alpha^{-1} \circ (\id \tens \tinycomult[gray dot] )$.
A monoid in a braided monoidal category {\cat C} is called {\bf commutative} when $
\tinymult[gray dot] \circ \sigma = \tinymult[gray dot]$;
it is {\bf symmetric} if the weaker condition 
$\tinycounit[gray dot] \circ \tinymult[gray dot] \circ \sigma = \tinycounit[gray dot] \circ \tinymult[gray dot]
$ holds.
A pair of a monoid  $\tinymult[gray dot]$ and a comonoid $\tinycomult[black dot]$  is called {\bf special} when the equation $ \tinymult[gray dot] \circ \tinycomult[black dot] = \id$ holds.
\end{defn}


Recently, the bicategory of Frobenius algebras, bimodules and bimodule homomorphisms in a monoidal bicategory $\cat{B}$ was introduced in~\cite{carquevillerunkel} as the {\it equivariant completion }of $\cat{B}$. This is a tool for generating topological quantum field theories, which is a non-trivial process in general.

    
% A {\bf dagger monoidal category} is a monoidal category that is equiped with a dagger $\dagger$, such that the equalities below hold.
 
% \begin{align*}
% (f \otimes g)^{\dagger} &= g^{\dagger} \otimes f^{\dagger}\\
% \alpha^{\dagger} &= \alpha^{-1} \\
%  \rho^{\dagger} &= \rho^{-1} \\
  % \lambda^{\dagger} &= \lambda^{-1} 
 %\end{align*}
 
% A {\bf dagger braided monoidal category} is a dagger monoidal category with a braiding, such that the equation below holds
 
% \begin{equation*}
 %   \sigma^{\dagger} = \sigma^{-1} \\
% \end{equation*}
 
 
% A {\bf monoidal dagger functor} $F:{\bf C} \rightarrow {\bf D}$ is a functor between monoidal dagger categories that preserves the dagger, which means that $F\circ \dagger = \dagger \circ F$. ?????
%\end{defn}

%We will write $\bAlg_{S}[{\bf C}]$ and $\cAlg_{S}[{\bf C}]$ for $S\subset\{spec, \mbox{Frob}, c, sym\}$ for the sub-double categories and sub-bicategories of $\bAlg[{\bf C}]$ and $\cAlg[{\bf C}]$, respectively, where the objects are restricted to the type of monoids specified by $S$. We denote special by $spec$, Frobenius by $\mbox{Frob}$, commutative by $c$ and symmetric by $sym$. 


Let $\doub{D}$ be a double category. The {\bf equivariant completion} of the horizontal bicategory $\cH(\doub{D})$ is the horizontal bicategory of the double category $\mathbb{E}q[{\mathbb{D}}]$ defined below.  

\begin{defn}
Let ${\mathbb{D}}$ be a double category with local coequalisers and loosely strong companions, where the tensor product preserves coequalisers. We can define a new double category $\mathbb{E}q[{\mathbb{D}}]$ consisting of the elements listed below.


\begin{itemize}
\item 0-cells are {\bf Frobenius algebras} $(a, A,\tinymult[gray dot], \tinyunit[gray dot])$, in the monoidal category ${\mathbb{D}_1}$. 
\item 1-morphisms $(A,\tinymult[gray dot], \tinyunit[gray dot]) \mapsto (B,\tinymult[black dot], \tinyunit[black dot])$ are {\bf monoid homomorphism}
\item horizontal 1-cells $(A,\tinymult[gray dot], \tinyunit[gray dot]) \mapsto (B,\tinymult[black dot], \tinyunit[black dot])$ are {\bf bimodules}
\item 2-cells $({\bf M},M) \rightarrow ({\bf N},N)$ from a $A$-$B$-bimodule to a $C$-$D$-bimodule are $(\phi, \psi)$-equivariant maps, where $\phi:  A\rightarrow C$, $\psi: B \rightarrow D$ are monoid homomorphisms.  
\end{itemize}

Structural data regarding this construction, such as horizontal composition, is as for $\mathbb{A}lg[{\mathbb{D}}]$.
\end{defn}

\begin{cor}
The equivariant completion of a monoidal bicategory $\cat{B}$ is monoidal. It is braided whenever $\cat{B}$ is braided and it is symmetric whenever $\cat{B}$ is symmetric.
\end{cor}

\begin{proof}
This follows from Proposition~\ref{thm:eqcomp} applied to the double category $\mathbb{E}q[\cat{B}]$, where \cat{B} is regarded as a double category with trivial 1-morphisms.
\end{proof}


Another related example in quantum theory is the bicategory of $\cAlg[\mathbb{D}]$ special dagger Frobenius algebras, bimodules and bimodule homomorphisms in a monoidal bicategory~\cite{heunenvicarywester}, which was introduced as a mathematical foundation for a diagrammatic language of quantum protocols. Examples are the well-known bicategory $\cat{2Hilb}$ and the bicategory $2[CP[{\bf C}]]$ of mixed quantum states. The monoidal structure is essential for such applications, as it enables the description of compound quantum systems, as well as parallel quantum protocols. 


\begin{defn}
Let ${\bf C}$ be a category. A dagger $\dagger: {\cat C} \rightarrow {\cat C}$, is a contravariant functor which is the identity on objects such that $\dagger(\dagger(f)) = f$. 
A {\bf \index{dagger monoidal category}dagger monoidal category} is a monoidal category that is equipped with a dagger $\dagger$, such that the equalities below hold.
 \begin{align*}
 (f \otimes g)^{\dagger} &= g^{\dagger} \otimes f^{\dagger}\\
 \alpha^{\dagger} &= \alpha^{-1} \\
  \rho^{\dagger} &= \rho^{-1} \\
   \lambda^{\dagger} &= \lambda^{-1} 
 \end{align*}
A {\bf \index{dagger braided monoidal category}dagger braided monoidal category} is a dagger monoidal category with a braiding that satisfies the equality below.
 \begin{equation*}
    \sigma^{\dagger} = \sigma^{-1} \\
 \end{equation*}
 A Frobenius algebra in a dagger braided monoidal category $\cat{C}$ is a {\bf dagger Frobenius algebra} when the comonoid is the dagger image of the monoid. 
A bimodule is called a {\bf dagger bimodule} when the equation below holds, where the comonoid is the dagger of the monoid and we denote $\dagger({\bf M})$ by ${\bf M}^{\dagger}$.

\begin{equation}
{\bf M}^{\dagger} = (\id \tens {\bf M }\tens \id) \circ (\tinycomult[white dot] \tens \id \tens \tinycomult[black dot]) \circ (\tinyunit[white dot] \tens \id \tens \tinyunit[black dot])
\end{equation}
\end{defn}

\begin{defn}
Let $f: A\rightarrow B$ be an algebra homomorphism between dagger Frobenius algebras in a dagger category. The {\bf conjugate} $f_*$ of $f$ is defined as $f_* := (\id \otimes \tinycounit[gray dot]) \circ (\id \otimes \tinymult[gray dot]) \circ (\id \otimes f^{\dagger} \otimes \id) \circ (\tinycomult[gray dot] \otimes \id) \circ (\tinyunit[gray dot] \otimes \id)$
An algebra homomorphism $f$ is {\bf self-conjugate} if $f=f_*$.
\end{defn}



To prove that the $2[-]$ construction preserves braided monoidal structure, one could define a suitable notion of dagger double category and prove that Proposition~\ref{thm:eqcomp} can be specialised to the case where monoids are special dagger Frobenius algebras and bimodules are dager bimodules. Instead, we make use of the direct proof of the fibrant and monoidal structure of de double category $\ltwo[\cat{C}]$ defined in~\cite{westerPhDthesis}, for the special case that $\cat{C}$ is a monoidal dagger category,~\cite[Prop 5.4.25]{westerPhDthesis}. This double category consists of special dagger Frobenius algebras, self-conjugate algebra homomorphisms, dagger bimodules and equivariant maps.

\begin{thm}
The assignment $2[-]$ gives rise to the functors of locally cubical bicategories below,
\begin{align*}
 \mathcal{B}r\mathcal{M}on\mathcal{C}at \rightarrow \mathcal{B}r\mathcal{M}on\mathcal{B}icat\\
 \mathcal{S}ym\mathcal{M}on\mathcal{C}at \rightarrow \mathcal{S}ym\mathcal{M}on\mathcal{B}icat
\end{align*}
Where $\mathcal{B}r\mathcal{M}on\mathcal{C}at$ and $\mathcal{S}ym\mathcal{M}on\mathcal{C}at$ are the locally cubical bicategories of braided monoidal bicategories and symmetric monoidal bicategories, respectively, where all coequalizers exist and the tensor product preserves coequalizers. these locally cubical bicategories have only trivial loose 2-cells and 3-cells
\end{thm}

\begin{proof}
This follows directly from~\cite[Proposition5.4.25]{westerPhDthesis} and Theorem~\ref{thm:eqcomp}.
\end{proof}

Similarly, one can show that the result holds for the bicategory of commutative or symmetric dagger Frobenius algebras, dagger bimodules and bimodule homomorphisms.


\begin{cor}
The bicategory $\cat{2Hilb}$ is symmetric monoidal.
\end{cor}

\begin{proof}
As shown in~\cite[Section 3.6.3]{westerthesis}, $\cat{2Hilb}$ is equivalent to $2[\cat{FHilb}]$, where $\cat{FHilb}$ is the symmetric monoidal category of finite Hilbert spaces and linear maps, which contains all coequalizers.
\end{proof}

\subsection*{Black-boxing of open Markov processes}
\label{sec:markov}

As another example, the authors of~\cite{bc:markov} construct a symmetric monoidal double category $\mathbb{M}\mathsf{ark}$ whose objects are finite sets and whose loose 1-cells are ``open Markov processes''.
The loose composition and the tensor product then give two related ways to put together smaller open Markov processes into larger ones (and eventually into closed ones).
In addition, they constructed a symmetric monoidal \emph{functor}, called \textbf{black-boxing}, from this double category to a double category $\mathbb{L}\mathsf{inRel}$ of linear relations.

The authors of~\cite{bc:markov} also showed that both of these double categories have companions for tight isomorphisms, and then used our results to conclude that their loose bicategories $\mathcal{M}\mathit{ark}$ and $\mathcal{L}\mathit{inRel}$ are symmetric monoidal bicategories.
At the time of writing~\cite{bc:markov}, only the earlier version~\cite{shulman:smbicat} of this paper was available, which constructed monoidal bicategories but not monoidal functors between them; thus, the authors of~\cite{bc:markov} were only able to conjecture that their black-boxing double functor induced a symmetric monoidal functor of bicategories.
However, with Theorem~\ref{thm:lcbcfunctor} now in hand, we can prove their conjecture:

\begin{thm}[{\cite[Conjecture 6.7]{bc:markov}}]
  There exists a symmetric monoidal functor of bicategories $\blacksquare : \mathcal{M}\mathit{ark} \to \mathcal{L}\mathit{inRel}$ that maps
  \begin{enumerate}
  \item any finite set $S$ to the vector space $\blacksquare(S) = \mathbb{R}^S \oplus \mathbb{R}^S$,
  \item any open Markov process $S \xto{i} (X,H) \xot{o} T$ to the linear relation
    \[ \blacksquare(S \xto{i} (X,H) \xot{o} T) \subseteq \mathbb{R}^S\oplus \mathbb{R}^S\oplus \mathbb{R}^T\oplus \mathbb{R}^T \]
    consisting of all 4-tuples $(i^*(v),I,o^*(v),O)$ where $v\in \mathbb{R}^X$ is some steady state with inflows $I$ and outflows $O$ (see~\cite[Definition 2.7]{bc:markov}), and
  \item any globular morphism of open Markov processes
    \[
      \begin{tikzcd}
        & {(X,H)} \arrow[dd, "p"] &  \\
        S \arrow[ru, "i_1"] \arrow[rd, "i_1'"'] &  & T \arrow[lu, "o_1"'] \arrow[ld, "o_1'"] \\
        & {(X',H')} & 
      \end{tikzcd}
    \]
    to the inclusion $\blacksquare(X,H) \subseteq \blacksquare(X',H')$.
  \end{enumerate}
\end{thm}
\begin{proof}
  Apply Theorem~\ref{thm:lcbcfunctor} to the symmetric monoidal double functor of~\cite[Theorem 5.5]{bc:markov}.
\end{proof}


% Local Variables:
% TeX-master: "smbicat"
% End:
